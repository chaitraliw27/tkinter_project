import requests
import pandas as pd
from io import StringIO

# URL of the API endpoint
url = 'https://api.example.com/data?contentformat=csv'

# Making a GET request to the endpoint
response = requests.get(url)

# Checking if the request was successful (status code 200)
if response.status_code == 200:
    # Assuming the response content is in CSV format
    # Using StringIO to convert response content into file-like object
    csv_data = StringIO(response.text)
    
    # Using pandas to read the CSV data directly from the file-like object
    df = pd.read_csv(csv_data)
    
    # Now you can work with the DataFrame 'df' as usual
    print(df.head())  # Example: printing the first few rows of the DataFrame
else:
    print("Failed to fetch data from the API:", response.status_code)
